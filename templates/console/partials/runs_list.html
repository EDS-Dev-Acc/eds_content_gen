<!-- Runs row partial for HTMX updates -->
{% for run in runs %}
<tr>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        #{{ run.id }}
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        <div class="text-sm font-medium text-gray-900">{{ run.source.name }}</div>
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium
                     {% if run.status == 'completed' %}bg-green-100 text-green-800
                     {% elif run.status == 'running' %}bg-blue-100 text-blue-800
                     {% elif run.status == 'failed' %}bg-red-100 text-red-800
                     {% elif run.status == 'cancelled' %}bg-gray-100 text-gray-800
                     {% else %}bg-yellow-100 text-yellow-800{% endif %}">
            {{ run.status|title }}
        </span>
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        {{ run.started_at|date:"M d, H:i"|default:"-" }}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        {% if run.completed_at and run.started_at %}
            {{ run.duration|default:"-" }}
        {% elif run.status == 'running' %}
            <span class="text-blue-600">Running...</span>
        {% else %}
            -
        {% endif %}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        {{ run.articles_found|default:0 }}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
        {% if run.status == 'running' %}
        <button hx-post="{% url 'console:run_cancel' run.id %}"
                hx-target="closest tr"
                hx-swap="outerHTML"
                class="text-red-600 hover:text-red-900">
            Cancel
        </button>
        {% else %}
        <a href="{% url 'console:run_detail' run.id %}" class="text-indigo-600 hover:text-indigo-900">View</a>
        {% endif %}
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="7" class="px-6 py-4 text-center text-gray-500">
        No runs found. <a href="#" onclick="openModal('start-run-modal')" class="text-indigo-600 hover:text-indigo-500">Start one?</a>
    </td>
</tr>
{% endfor %}
