<!-- System health partial for dashboard -->
<div class="overflow-hidden bg-white shadow sm:rounded-lg">
    <div class="px-4 py-5 sm:px-6">
        <h3 class="text-base font-semibold leading-6 text-gray-900">System Health</h3>
    </div>
    <div class="border-t border-gray-200">
        <dl class="divide-y divide-gray-200">
            <!-- Database -->
            <div class="px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Database</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0 flex items-center">
                    {% if health.database %}
                    <span class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800">
                        <svg class="mr-1.5 h-2 w-2 text-green-400" fill="currentColor" viewBox="0 0 8 8">
                            <circle cx="4" cy="4" r="3" />
                        </svg>
                        Connected
                    </span>
                    {% else %}
                    <span class="inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800">
                        <svg class="mr-1.5 h-2 w-2 text-red-400" fill="currentColor" viewBox="0 0 8 8">
                            <circle cx="4" cy="4" r="3" />
                        </svg>
                        Disconnected
                    </span>
                    {% endif %}
                </dd>
            </div>

            <!-- Celery Worker -->
            <div class="px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Celery Worker</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0 flex items-center">
                    {% if health.celery %}
                    <span class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800">
                        <svg class="mr-1.5 h-2 w-2 text-green-400" fill="currentColor" viewBox="0 0 8 8">
                            <circle cx="4" cy="4" r="3" />
                        </svg>
                        Running
                    </span>
                    <span class="ml-2 text-xs text-gray-500">{{ health.celery_workers|default:"0" }} workers</span>
                    {% else %}
                    <span class="inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800">
                        <svg class="mr-1.5 h-2 w-2 text-red-400" fill="currentColor" viewBox="0 0 8 8">
                            <circle cx="4" cy="4" r="3" />
                        </svg>
                        Not Running
                    </span>
                    {% endif %}
                </dd>
            </div>

            <!-- Redis -->
            <div class="px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Redis</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0 flex items-center">
                    {% if health.redis %}
                    <span class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800">
                        <svg class="mr-1.5 h-2 w-2 text-green-400" fill="currentColor" viewBox="0 0 8 8">
                            <circle cx="4" cy="4" r="3" />
                        </svg>
                        Connected
                    </span>
                    {% else %}
                    <span class="inline-flex items-center rounded-full bg-yellow-100 px-2.5 py-0.5 text-xs font-medium text-yellow-800">
                        <svg class="mr-1.5 h-2 w-2 text-yellow-400" fill="currentColor" viewBox="0 0 8 8">
                            <circle cx="4" cy="4" r="3" />
                        </svg>
                        Optional (Using DB)
                    </span>
                    {% endif %}
                </dd>
            </div>

            <!-- LLM Service -->
            <div class="px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">LLM Service</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0 flex items-center">
                    {% if health.llm %}
                    <span class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800">
                        <svg class="mr-1.5 h-2 w-2 text-green-400" fill="currentColor" viewBox="0 0 8 8">
                            <circle cx="4" cy="4" r="3" />
                        </svg>
                        Configured
                    </span>
                    <span class="ml-2 text-xs text-gray-500">{{ health.llm_provider|default:"Unknown" }}</span>
                    {% else %}
                    <span class="inline-flex items-center rounded-full bg-yellow-100 px-2.5 py-0.5 text-xs font-medium text-yellow-800">
                        <svg class="mr-1.5 h-2 w-2 text-yellow-400" fill="currentColor" viewBox="0 0 8 8">
                            <circle cx="4" cy="4" r="3" />
                        </svg>
                        Not Configured
                    </span>
                    {% endif %}
                </dd>
            </div>

            <!-- Disk Usage -->
            <div class="px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Disk Usage</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0">
                    <div class="flex items-center">
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mr-2">
                            <div class="h-2.5 rounded-full {% if health.disk_percent > 90 %}bg-red-600{% elif health.disk_percent > 75 %}bg-yellow-600{% else %}bg-green-600{% endif %}"
                                 style="width: {{ health.disk_percent|default:'0' }}%"></div>
                        </div>
                        <span class="text-xs text-gray-500">{{ health.disk_percent|default:'0' }}%</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">{{ health.disk_used|default:'0' }} / {{ health.disk_total|default:'0' }}</p>
                </dd>
            </div>
        </dl>
    </div>
</div>
