<!-- Source row partial for HTMX updates -->
{% for source in sources %}
<tr>
    <td class="px-6 py-4 whitespace-nowrap">
        <div class="text-sm font-medium text-gray-900">{{ source.name }}</div>
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        <div class="text-sm text-gray-500 truncate max-w-xs">{{ source.url }}</div>
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium
                     {% if source.status == 'active' %}bg-green-100 text-green-800{% else %}bg-gray-100 text-gray-800{% endif %}">
            {{ source.status|title }}
        </span>
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        {{ source.last_crawled_at|date:"M d, H:i"|default:"Never" }}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        {{ source.article_count|default:0 }}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
        <button hx-post="{% url 'console:source_crawl' source.id %}"
                hx-target="#alerts-container"
                hx-swap="innerHTML"
                class="text-green-600 hover:text-green-900 mr-3">
            Crawl
        </button>
        <a href="/admin/sources/source/{{ source.id }}/change/" class="text-indigo-600 hover:text-indigo-900 mr-3">Edit</a>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="6" class="px-6 py-4 text-center text-gray-500">
        No sources found. <a href="#" onclick="openModal('add-source-modal')" class="text-indigo-600 hover:text-indigo-500">Add one?</a>
    </td>
</tr>
{% endfor %}
